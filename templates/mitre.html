{% extends "base.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/mitre.css') }}" />

<h1>MITRE Tactics</h1>

<div class="mitre-grid">
    {% for tactic in mitre_content %}
    <div class="mitre-box">
        <input type="checkbox" id="{{ tactic.title | replace(' ', '-') }}" class="tactic-checkbox" />
        <label for="{{ tactic.title | replace(' ', '-') }}" class="checkbox-label"></label>
        <h2><a href="{{ url_for('routes.mitre_tactic', tactic=tactic.title.replace(' ', '_')) }}">{{ tactic.title }}</a></h2>
        <p>{{ tactic.description }}</p>
    </div>
    {% endfor %}
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const checkboxes = document.querySelectorAll(".tactic-checkbox");

    // Load saved states from localStorage
    checkboxes.forEach((checkbox) => {
      const id = checkbox.id;
      if (localStorage.getItem(id) === "true") {
        checkbox.checked = true;
      }

      // Save state to localStorage when toggled
      checkbox.addEventListener("change", () => {
        localStorage.setItem(id, checkbox.checked);
      });
    });
  });
</script>
{% endblock %}
